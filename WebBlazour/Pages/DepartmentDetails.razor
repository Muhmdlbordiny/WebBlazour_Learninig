@using WebBlazour.Service
<h3>DepartmentDetails</h3>
@page "/departmentdetails/{Id:int}"
@if (!IsDataLoaded)
{
    <Loading/>
}
else if (CurDep is null)
{
    <p class="text-danger">Employee not found.</p>
}
else
{
    <h3 class="card-title">Department Details for @CurDep.Name</h3>
    <div class="form-group">
        <label class="col-form-label">Department ID:</label>
        <label class="form-control">@CurDep.Id</label>
    </div>

    <div class="form-group">
        <label class="col-form-label">Department Name:</label>
        <label class="form-control">@CurDep.Name</label>
    </div>
    <div class="text-end">
        <button class="btn btn-secondary mt-3" @onclick='() => NavigationManager.NavigateTo("/departmentoverview")'>Back</button>
    </div>
}

@code {
    [Inject]
    public NavigationManager NavigationManager { get; set; }
	[Parameter]
	public int Id { get; set; }
    [Inject]
    public IDepartmentDataService DepartmentDataService { get; set; }
    public Department CurDep = new Department();
    protected bool IsDataLoaded = false;
    protected override async Task OnInitializedAsync()
    {
        CurDep = await DepartmentDataService.GetDepartmentById(Id);
        IsDataLoaded = true;
    }
}
